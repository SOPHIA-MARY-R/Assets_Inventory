@page "/Machine-Master"
@inject MachineMasterHttpClient masterHttpClient
<PageTitle>Machine Master | Fluid</PageTitle>

<MudText Typo="Typo.h5" Color="Color.Primary">Machine Master</MudText>
<MudText Typo="Typo.body1">Manage all machines in the inventory</MudText>

<MudTable Dense Elevation=0 Outlined Hover HorizontalScrollbar Class="mt-4" ServerData="@(new Func<TableState, Task<TableData<MachineMasterModel>>>(OnServerReloadAsync))" @ref="_machineTable">
    <ToolBarContent>
        <MudButton Color=Color.Success Variant=Variant.Filled DisableElevation StartIcon="@Icons.Material.Filled.Add">Create</MudButton>
        <MudButton Color=Color.Tertiary Class="ms-2" Variant=Variant.Filled DisableElevation StartIcon="@Icons.Material.Filled.Refresh" OnClick="@(() => OnSearch(""))">Reload</MudButton>
        <MudButton Color=Color.Info Class="ms-2" Variant=Variant.Filled DisableElevation StartIcon="@Icons.Custom.FileFormats.FileExcel">Export</MudButton>
        <MudSpacer />
        <MudTextField T="string" Value="_searchString" ValueChanged="OnSearch" DebounceInterval="500" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Asset Tag</MudTh>
        <MudTh>Manufacturer</MudTh>
        <MudTh>Model</MudTh>
        <MudTh>Machine Type</MudTh>
        <MudTh>Location</MudTh>
        <MudTh>Actions</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd>@context.AssetTag</MudTd>
        <MudTd>@context.Manufacturer</MudTd>
        <MudTd>@context.Model</MudTd>
        <MudTd>@context.MachineType</MudTd>
        <MudTd>@context.AssetLocation</MudTd>
        <MudTd>
            <MudIconButton Color="Color.Error" Variant="Variant.Filled" Icon="@Icons.Filled.Delete" OnClick="@(() => Delete(context.AssetTag))" />
        </MudTd>
    </RowTemplate>
    <NoRecordsContent>
        <MudText>No matching records found</MudText>
    </NoRecordsContent>
    <LoadingContent>
        <MudText>Loading...</MudText>
    </LoadingContent>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>