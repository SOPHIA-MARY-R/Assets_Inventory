@page "/MotherBoard"
@inject NavigationManager NavManager
<MudTable Dense Elevation=0 Outlined Hover T="MotherboardModel" Items="Motherboards">
    <ToolBarContent>
        <MudButton Color=Color.Success OnClick="Redirect" Variant=Variant.Filled DisableElevation StartIcon="@Icons.Material.Filled.Add">
            Create
        </MudButton>
        <MudButton Color=Color.Tertiary Disabled="@_processing" OnClick="ProcessSomething" Class="ma-2" Variant=Variant.Filled DisableElevation StartIcon="@Icons.Material.Filled.Refresh">
        @if (_processing)
        {
            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
            <MudText Class="ms-2">Processing</MudText>
        }
        else
        {
            <MudText>Reload</MudText>
        }
        </MudButton>
        <MudButton Color=Color.Info Class="ma-2" Variant=Variant.Filled DisableElevation StartIcon="@Icons.Custom.FileFormats.FileExcel">
            Export
        </MudButton>
        <MudSpacer />
        <MudTextField @bind-Value="searchString" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Serial Number</MudTh>
        <MudTh>Manufacturer</MudTh>
        <MudTh>Product</MudTh>
        <MudTh>Status</MudTh>
        <MudTh>Version</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd>@context.SerialNumber</MudTd>
        <MudTd>@context.Manufacturer</MudTd>
        <MudTd>@context.Product</MudTd>
        <MudTd>@context.Status</MudTd>
        <MudTd>@context.Version</MudTd>
    </RowTemplate>
    <NoRecordsContent>
        <MudText>No matching records found</MudText>
    </NoRecordsContent>
    <LoadingContent>
        <MudText>Loading...</MudText>
    </LoadingContent>
    <PagerContent>
        <MudTablePager HideRowsPerPage/>
    </PagerContent>
</MudTable>
@code{
    private bool _processing = false;

    async Task ProcessSomething()
    {
        _processing = true;
        await Task.Delay(2000);
        _processing = false;
    }
    private List<MotherboardModel> Motherboards = new List<MotherboardModel>()
    {
        new MotherboardModel()
        {
            SerialNumber="1234",
            Manufacturer="Zebronic",
            Product="9025",
            Status="Good",
            Version="90.05"
        }
        ,
        new MotherboardModel()
        {
            SerialNumber="2192",
            Manufacturer="Sapphire",
            Product="1923",
            Status="Good",
            Version="9.2"
        }
        ,
        new MotherboardModel()
        {
            SerialNumber="2391",
            Manufacturer="Intel",
            Product="2382",
            Status="Bad",
            Version="8.1"
        }
        ,
        new MotherboardModel()
        {
            SerialNumber="2392",
            Manufacturer="Asus",
            Product="1291",
            Status="Worse",
            Version="9.1"
        }
    };
    private string searchString = null;
    private bool FilterFunc(KeyboardModel keyboard)
    {
        if (string.IsNullOrWhiteSpace(searchString))
            return true;
        if (keyboard.SerialNumber.Contains(searchString, StringComparison.OrdinalIgnoreCase))
            return true;
        if (keyboard.Manufacturer.Contains(searchString, StringComparison.OrdinalIgnoreCase))
            return true;
        if (keyboard.Model.Contains(searchString, StringComparison.OrdinalIgnoreCase))
            return true;
        if ($"{keyboard.SerialNumber} {keyboard.Manufacturer} {keyboard.Model}".Contains(searchString))
            return true;
        return false;
    } 
    void Redirect()
    {
        NavManager.NavigateTo("/MotherBoardForm");
    }
}